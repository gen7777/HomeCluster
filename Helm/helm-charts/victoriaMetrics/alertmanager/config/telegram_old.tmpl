{{ define "telegram.message" }}
{{ range .Alerts }}
{{ $severity := .Labels.severity -}}
{{ $alertName := .Labels.alertname }}
{{ $dc := .Labels.datacenter }}
{{ $ns := .Labels.namespace }}
{{ $summary := .Annotations.summary }}
{{ $descr := .Annotations.description}}
{{ $runbook := .Annotations.runbook_url }}
{{ if eq .Status "firing" }}
ğŸ”¥ <b>{{ $alertName }}</b>
{{ if eq $severity "critical" }}ğŸ¤¬ <b>Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ 
{{ if ne $dc "" }}ğŸ  Ğ”Ğ°Ñ‚Ğ°Ñ†ĞµĞ½Ñ‚Ñ€: <b>{{ $dc }}</b> {{ end }}{{ if ne $ns "" }}ğŸ‘‰Namespace: <b>{{ $ns }}</b> {{ end }}{{ if ne $summary "" }}ğŸ‘‰ <b>{{ $summary }}</b> {{ end }}
{{ if ne $descr "" }}â„¹ <b>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:</b>{{ $descr }}{{ end }}
{{ if ne $runbook }}â„¹ <b>RunBook:</b>{{ $runbook }}{{ end }}
<b>Ğ”Ğ¾Ğ¿Ğ˜Ğ½Ñ„Ğ¾:</b>
{{ range $key, $value := .Labels }}
{{ if ne $key "alertname" }}
<b>{{ $key }}</b>: <i>{{ $value }}</i>{{ end }}
{{ end }}
{{ else if eq $severity "warning" }}
ğŸ˜± <b>Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ
{{ if ne $dc "" }}ğŸ  Ğ”Ğ°Ñ‚Ğ°Ñ†ĞµĞ½Ñ‚Ñ€: <b>{{ $dc }}</b>{{ end }}
{{ if ne $ns "" }}ğŸ‘‰ Namespace: <b>{{ $ns }}</b>{{ end }}
ğŸ‘‰ <b>{{ $summary }}</b>
â„¹ <b>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:</b>{{ $descr }}
{{ if ne $runbook }}â„¹ <b>RunBook:</b>{{ .Annotations.runbook_url }}{{ end }}
{{ else if eq $severity "info" }}
â„¹ <b>Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> Ğ˜Ğ½Ñ„Ğ¾
{{ if ne $dc "" }}ğŸ  Ğ”Ğ°Ñ‚Ğ°Ñ†ĞµĞ½Ñ‚Ñ€: <b>{{ $dc }}</b> {{ end }}
{{ if ne $ns "" }}ğŸ‘‰ Namespace: <b>{{ $ns }}</b> {{ end }}
ğŸ‘‰ <b>{{ $summary }}</b>
â„¹ <b>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ: </b>{{ $descr }}
{{ else }}
<b>Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ: </b>? ğŸ¤ª {{ $severity }}
{{ end }}
{{ else }}
âœ… <b>{{ $alertName }}</b> âœ…
{{if eq $severity "critical"}}ğŸ¤¬ <b>Ğ‘Ñ‹Ğ» ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹
{{ if ne $dc "" }}ğŸ  Ğ”Ğ°Ñ‚Ğ°Ñ†ĞµĞ½Ñ‚Ñ€: <b>{{ $dc }}</b> {{ end }}
{{ if ne $ns "" }}ğŸ‘‰Namespace: <b>{{ $ns }}</b> {{ end }}
ğŸ‘‰ <b>{{ .Annotations.summary }}</b>
â„¹ <b>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:</b>{{ .Annotations.description }}
{{ else if eq $severity "warning" }}
ğŸ˜±<b>Ğ‘Ñ‹Ğ» ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ
{{ if ne $dc "" }}ğŸ  Ğ”Ğ°Ñ‚Ğ°Ñ†ĞµĞ½Ñ‚Ñ€: <b>{{ $dc }}</b> ğŸ {{ end }}
{{ if ne $ns "" }}ğŸ‘‰ Namespace: <b>{{ $ns }}</b> ğŸ‘ˆ{{ end }}
ğŸ‘‰ <b>{{ .Annotations.summary }}</b>
â„¹ <b>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:</b>{{ .Annotations.description }}
{{ else if eq $severity "info" }}
â„¹ <b>Ğ‘Ñ‹Ğ» ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> Ğ˜Ğ½Ñ„Ğ¾
{{- if ne $dc "" -}}ğŸ  Ğ”Ğ°Ñ‚Ğ°Ñ†ĞµĞ½Ñ‚Ñ€: <b>{{ $dc }}</b> {{- end -}}
ğŸ‘‰ <b>{{ .Annotations.summary }}</b> ğŸ‘ˆ
<b>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:</b>{{ .Annotations.description }}
{{ else }}
<b>Ğ‘Ñ‹Ğ» ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ:</b> ĞĞ•Ğ˜Ğ—Ğ’Ğ•Ğ¡Ğ¢ĞĞ ğŸ¤ª {{ $severity }}
{{ end }}
{{ end }}
{{ end }}
{{ end }}
